!function(a,b){function c(){i&&(i.className=""),j&&j.parentNode&&(j.parentNode.parentNode&&j.parentNode.parentNode.classList.remove("draaft-selection"),j.parentNode.removeChild(j)),i=null,j=null}function d(){var a=b.getSelection();if(a&&!a.isCollapsed){var c=a.getRangeAt(0);if(c&&c.endContainer){var d=c.commonAncestorContainer;1!=d.nodeType&&(d=d.parentNode),d.classList.add("draaft-selection");var f=b.createElement("span");f.style.position="relative";var g=c.cloneRange();g.setStart(c.endContainer,c.endOffset),g.insertNode(f),j=b.createElement("span"),j.className="draaft-icon btn",j.addEventListener("mousedown",function(){e(a.toString())}),f.appendChild(j)}}}function e(c,d){c=c||"",d=d||location.href,k=b.createElement("div"),k.id="draaft-overlay",k.onclick=g;var e=a.encodeURIComponent,h="https://alpha.draaft.co/bookmark?url="+e(d)+"&quote="+e(c),i=f();if(i&&(h+="&author="+e(i)),!/http/.test(location.protocol))return a.open(h,"draaft","location=no,menubar=no,resizable=yes,titlebar=yes,toolbar=no,width=480,height=640");var j=b.createElement("iframe");j.onload=function(){k.className="loaded"},j.onerror=function(){g()},j.src=h;var l=b.createElement("div");l.className="loader draaft-icon",k.appendChild(j),k.appendChild(l),b.body.appendChild(k)}function f(){var a,c=b.querySelector("meta[property='author']");if(c&&(a=c.getAttribute("content")))return a;for(var d=b.querySelectorAll("script[type='application/ld+json']"),e=0;e<d.length;e++){var f=d[e];if(f&&f.innerText)try{var g=JSON.parse(f.innerText);if(g&&/@person/i.test(g.type)&&g.name)return g.name}catch(a){}}}function g(){b.body.removeChild(k)}var h,i,j,k,l,m=".draaft-selection{position:relative}.draaft-selection ::selection,.draaft-selection::selection{background-color:#00c2ff}.draaft-icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTI4IDEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjE7Ij48cmVjdCBpZD0iaWNvbiIgeD0iMCIgeT0iMCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIHN0eWxlPSJmaWxsOm5vbmU7Ii8+PGcgaWQ9IkFBIj48cGF0aCBkPSJNMjUuMjkyLDkyLjc2NWwtOC4zNzksMjIuMjkybC0xNi45MTMsMGwzNi42MTksLTEwMi4xMTRsMTQuMjc1LDBsMzUuNjg5LDEwMi4xMTRsLTE3LjA2OSwwbC03LjkxMywtMjIuMjkybC0zNi4zMDksMFptMTcuNTM0LC01NS40bC0xMy42NTUsNDIuMTI0bDI4LjA4NSwwbC0xNC40MywtNDIuMTI0WiIgc3R5bGU9ImZpbGw6I2ZmZjsiLz48cGF0aCBkPSJNMTI4LDExNS4wNTdsLTE3LjA2OCwwbC03LjkxNCwtMjIuMjkybC0yNC4yMjYsMGwtNC42NCwtMTMuMjc2bDI0LjUyMiwwbC0xNC40MzEsLTQyLjEyNGwtMTEuOTQsMzYuODM1bC04LjAxMiwtMjIuOTI2bDEzLjc0NiwtMzguMzMxbDE0LjI3NSwwbDM1LjY4OCwxMDIuMTE0WiIgc3R5bGU9ImZpbGw6I2ZmZjsiLz48L2c+PC9zdmc+)}.draaft-icon.btn{position:absolute;width:16px;height:16px;box-sizing:content-box;display:block;border:5px solid #00c2ff;background-color:#00c2ff;border-radius:5px;color:#fff;z-index:9999;cursor:pointer}.draaft-selection .draaft-icon{left:-26px;top:100%}.draaft-img-container{position:relative;display:inline-block}.draaft-img-container .draaft-icon{left:8px;top:8px;opacity:.9}#draaft-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:10000}#draaft-overlay .loader{width:48px;height:48px;box-sizing:content-box;position:absolute;left:50%;top:50%;margin-left:-24px;margin-top:-24px;animation:bounce .5s infinite alternate;-webkit-animation:bounce .5s infinite alternate;-moz-animation:bounce .5s infinite alternate;-o-animation:bounce .5s infinite alternate}#draaft-overlay iframe{border:0 none;transition:opacity 1s;opacity:0;width:500px;height:640px;max-height:80vh;max-width:80vw}#draaft-overlay.loaded iframe{opacity:1;box-shadow:0 0 8px 2px rgba(0,0,0,.5)}#draaft-overlay.loaded .loader{display:none}@-webkit-keyframes bounce{from{-webkit-transform:scale(1)}to{-webkit-transform:scale(1.5)}}@-o-keyframes bounce{from{-o-transform:scale(1)}to{-o-transform:scale(1.5)}}@-moz-keyframes bounce{from{-moz-transform:scale(1)}to{-moz-transform:scale(1.5)}}@keyframes bounce{from{transform:scale(1)}to{transform:scale(1.5)}}",n=!/CSS/.test(m);!function(){n&&!l&&(l=b.createElement("style"),l.setAttribute("type","text/css"),"textContent"in l?l.textContent=m:l.styleSheet.cssText=m,b.getElementsByTagName("head")[0].appendChild(l))}(),b.addEventListener("selectionchange",function(){c(),clearTimeout(h),h=setTimeout(function(){d()},250)}),b.addEventListener("mouseover",function(a){function c(){f.removeEventListener(i,d),g.removeChild(h),g.parentNode.insertBefore(f,g),g.parentNode.removeChild(g)}function d(a){a.relatedTarget!=h&&c()}var f=a.target;if((f.localName=f.naturalWidth>50&&f.naturalHeight>50&&/^http/.test(f.src))&&"draaft-img-container"!=f.parentNode.className){var g=b.createElement("span");g.className="draaft-img-container",f.parentNode.insertBefore(g,f),f.parentNode.removeChild(f);var h=b.createElement("span");h.className="draaft-icon btn",h.addEventListener("click",function(){c(),e(null,f.src)}),g.appendChild(h),g.appendChild(f);var i="mouseout";f.addEventListener(i,d)}})}(window,document);